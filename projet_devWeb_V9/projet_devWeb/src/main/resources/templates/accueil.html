<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioth√®que Connect√©e</title>
    <link rel="stylesheet" th:href="@{/style.css}" />
</head>
<body class="bodyGarde">

    <div class="headerGarde">
        <h1>Biblioth√®que Connect√©e</h1>
    </div>

    <div class="buttonsGarde">
        <!-- ‚úÖ Non connect√© -->
        <div th:if="${not #authorization.expression('isAuthenticated()')}">
            <a href="/connexion" class="connect-btn">Se Connecter</a>
            <a href="/inscription" class="signup-btn">S‚Äôinscrire</a>
        </div>

        <!-- ‚úÖ Connect√© -->
        <div th:if="${#authorization.expression('isAuthenticated()')}">
            <a href="/profil" class="btn-unified btn-profil">üë§ Profil</a>

            <!-- ‚úÖ D√©connexion s√©curis√©e -->
            <form th:action="@{/logout}" method="post" class="logout-form">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="btn-unified btn-deconnexion">D√©connexion</button>
            </form>
            
            <!-- ‚úÖ Admin uniquement -->
            <a th:if="${#authorization.expression('hasAuthority(''ADMINISTRATEUR'')')}" href="/administrateur" class="btn-unified btn-admin">‚öô Admin</a>
        </div>
    </div>

    <div class="navGarde">
        <a href="/agenda">Agenda</a>
        <a href="/contact">Contact</a>
        <a href="/itineraire">Itin√©raire</a>
        <a href="/Objets">Objets Connect√©s</a>
    </div>

    <div class="contentGarde">
        <div class="search-container">
            <input type="text" id="search-box" placeholder="Rechercher un livre..." onkeyup="search()">
            <div id="results"></div>
        </div>

        <script>
            function search() {
                let query = document.getElementById("search-box").value;
                if (query.length > 0) {
                    fetch("search.php?query=" + query)
                        .then(response => response.text())
                        .then(data => {
                            document.getElementById("results").innerHTML = data;
                        });
                } else {
                    document.getElementById("results").innerHTML = "";
                }
            }
        </script>

        <h2>√Ä propos de nous</h2>
        <p style="text-indent: 30px;">Bienvenue dans notre biblioth√®que, un lieu o√π la passion pour la lecture et la d√©couverte prend vie. Ici, chaque livre est une porte ouverte vers de nouveaux horizons, chaque page une invitation √† explorer, √† apprendre et √† r√™ver. Nous vous offrons un acc√®s √† une riche collection de livres, de documents et de ressources num√©riques, soigneusement s√©lectionn√©s pour nourrir votre curiosit√© et enrichir vos connaissances. Naviguez √† votre rythme, laissez-vous guider par vos envies et trouvez des tr√©sors litt√©raires qui sauront √©veiller votre imagination. Que vous soyez √† la recherche de savoir, de d√©tente ou d‚Äôinspiration, notre biblioth√®que est un espace o√π chaque visite est une nouvelle aventure.</p>
    </div>

</body>
</html>
